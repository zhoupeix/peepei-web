{"version":3,"sources":["webpack:///./src/views/ItemEdit.vue?3704","webpack:///./src/views/ItemEdit.vue?210d","webpack:///src/views/ItemEdit.vue","webpack:///./src/views/ItemEdit.vue?7a12","webpack:///./src/views/ItemEdit.vue?3b83"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","_s","id","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","$http","defaults","baseURL","getAuthorization","handleAvatarSuccess","beforeAvatarUpload","icon","on","handleImageAdded","staticRenderFns","components","VueEditor","props","data","methods","created","fetch","component"],"mappings":"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","file":"js/chunk-86e01fd6.9372eb97.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"物品\")]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.id ? '编辑' :'新建')+\"物品\")])],1),_c('h1',[_vm._v(_vm._s(_vm.id ? \"编辑\" : \"新建\")+\"物品\")]),_c('el-card',[_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('el-form-item',{attrs:{\"label\":\"物品名称：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入物品名称\",\"clearable\":\"\"},model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品标题：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入标题\",\"clearable\":\"\"},model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品图标：\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.$http.defaults.baseURL + '/upload',\"headers\":_vm.getAuthorization(),\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.model.icon)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.model.icon}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"内容：\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.model.content),callback:function ($$v) {_vm.$set(_vm.model, \"content\", $$v)},expression:\"model.content\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"el-icon-upload\",attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>物品</el-breadcrumb-item>\n      <el-breadcrumb-item>{{id ? '编辑' :'新建'}}物品</el-breadcrumb-item>\n    </el-breadcrumb>\n    <h1>{{ id ? \"编辑\" : \"新建\" }}物品</h1>\n    <el-card>\n <el-form label-width=\"120px\" @submit.native.prevent=\"save\">\n      <el-form-item label=\"物品名称：\">\n        <el-input\n          v-model=\"model.name\"\n          placeholder=\"请输入物品名称\"\n          clearable\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"物品标题：\">\n        <el-input\n          v-model=\"model.title\"\n          placeholder=\"请输入标题\"\n          clearable\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"物品图标：\">\n        <el-upload\n          class=\"avatar-uploader\"\n          :action=\"$http.defaults.baseURL + '/upload'\"\n          :headers=\"getAuthorization()\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <img v-if=\"model.icon\" :src=\"model.icon\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n      <el-form-item label=\"内容：\">\n        <vue-editor\n          useCustomImageHandler\n          @image-added=\"handleImageAdded\"\n          v-model=\"model.content\"\n        ></vue-editor>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\" class=\"el-icon-upload\">保存</el-button>\n      </el-form-item>\n    </el-form>\n    </el-card>\n   \n  </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  components: {\n    VueEditor\n  },\n  props: {\n    id: {}\n  },\n  data() {\n    return {\n      model: {\n        \n      }\n    };\n  },\n  methods: {\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\n      // An example of using FormData\n      // NOTE: Your key could be different such as:\n      // formData.append('file', file)\n\n      let formData = new FormData();\n      formData.append(\"file\", file);\n      let res = await this.$http.post(\"upload\", formData);\n      Editor.insertEmbed(cursorLocation, \"image\", res.data.url);\n      resetUploader();\n    },\n    handleAvatarSuccess(res, file) {\n      this.$set(this.model,'icon',res.url)\n        // this.model.icon = res.url\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === 'image/jpeg';\n        const isPNG = file.type === 'image/png';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG && !isPNG) {\n          this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!');\n        }\n        return (isJPG || isPNG) && isLt2M;\n      },\n    async save() {\n      let res;\n      if (this.id) {\n        res = await this.$http.put(`rest/items/${this.id}`, this.model);\n      } else {\n        res = await this.$http.post(\"rest/items\", this.model);\n      }\n\n      this.$router.push(\"/item/list\");\n      this.$message({\n        type: \"success\",\n        message: \"保存成功\"\n      });\n    },\n    async fetch() {\n      const res = await this.$http.get(`rest/items/${this.id}`);\n      this.model = res.data;\n      console.log(res.data);\n    }\n  },\n  created() {\n    this.id && this.fetch();\n  }\n};\n</script>\n<style>\n.avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 5rem;\n    height: 5rem;\n    line-height: 5rem;\n    text-align: center;\n  }\n  .avatar {\n    width: 5rem;\n    height: 5rem;\n    display: block;\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemEdit.vue?vue&type=template&id=6a6acffe&\"\nimport script from \"./ItemEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ItemEdit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}