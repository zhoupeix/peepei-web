{"version":3,"sources":["webpack:///./src/views/ArticleEdit.vue?ec1d","webpack:///src/views/ArticleEdit.vue","webpack:///./src/views/ArticleEdit.vue?7936","webpack:///./src/views/ArticleEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","_s","id","nativeOn","$event","preventDefault","save","model","value","callback","$$v","$set","expression","_l","item","key","_id","name","on","handleImageAdded","staticRenderFns","components","VueEditor","props","data","categories","parents","methods","created","fetch","fetchCategories","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,UAAY,MAAM,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAAEC,KAAM,OAAQ,CAACR,EAAIS,GAAG,QAAQL,EAAG,qBAAqB,CAACJ,EAAIS,GAAG,UAAUL,EAAG,qBAAqB,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAK,KAAM,MAAM,SAAS,GAAGP,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,GAAK,KAAO,MAAM,QAAQP,EAAG,UAAU,CAACA,EAAG,UAAU,CAACG,MAAM,CAAC,cAAc,SAASK,SAAS,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBd,EAAIe,KAAKF,MAAW,CAACT,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,IAAIS,MAAM,CAACC,MAAOjB,EAAIgB,MAAgB,WAAEE,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIgB,MAAO,aAAcG,IAAME,WAAW,qBAAqBrB,EAAIsB,GAAItB,EAAc,YAAE,SAASuB,GAAM,OAAOnB,EAAG,YAAY,CAACoB,IAAID,EAAKE,IAAIlB,MAAM,CAAC,MAAQgB,EAAKG,KAAK,MAAQH,EAAKE,UAAS,IAAI,GAAGrB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,UAAU,UAAY,IAAIS,MAAM,CAACC,MAAOjB,EAAIgB,MAAW,MAAEE,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIgB,MAAO,QAASG,IAAME,WAAW,kBAAkB,GAAGjB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,sBAAwB,IAAIoB,GAAG,CAAC,cAAc3B,EAAI4B,kBAAkBZ,MAAM,CAACC,MAAOjB,EAAIgB,MAAa,QAAEE,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIgB,MAAO,UAAWG,IAAME,WAAW,oBAAoB,GAAGjB,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,YAAY,iBAAiBC,MAAM,CAAC,KAAO,UAAU,cAAc,WAAW,CAACP,EAAIS,GAAG,SAAS,IAAI,IAAI,IAAI,IAC3/CoB,EAAkB,G,oCC6CtB,GACEC,WAAY,CACVC,UAAJ,QAEEC,MAAO,CACLrB,GAAI,IAENsB,KAPF,WAQI,MAAO,CACLC,WAAY,GACZlB,MAAO,GACPmB,QAAS,KAGbC,QAAS,CACP,iBADJ,SACA,gLAKA,eACA,mBANA,SAOA,yBAPA,OAOA,EAPA,OAQA,oCACA,IATA,8CAWI,KAZJ,WAYA,4JAEA,KAFA,gCAGA,mDAHA,oDAKA,sCALA,qBAQA,gCACA,YACA,eACA,iBAXA,+CAcI,gBA1BJ,WA0BA,8KACA,+BADA,OACA,EADA,OAEA,oBAFA,8CAKI,MA/BJ,WA+BA,8KACA,2CADA,OACA,EADA,OAEA,eACA,oBAHA,+CAMEC,QAnDF,WAoDIpC,KAAKU,IAAMV,KAAKqC,QAChBrC,KAAKsC,oBCnG4U,I,YCOjVC,EAAY,eACd,EACAzC,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAAW,E","file":"js/chunk-2d0a4246.ee2cd6d9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"文章管理\")]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.id ? '编辑' :'新建')+\"文章\")])],1),_c('h1',[_vm._v(_vm._s(_vm.id ? \"编辑\" : \"新建\")+\"文章\")]),_c('el-card',[_c('el-form',{attrs:{\"label-width\":\"120px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_c('el-form-item',{attrs:{\"label\":\"所属分类：\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.model.categories),callback:function ($$v) {_vm.$set(_vm.model, \"categories\", $$v)},expression:\"model.categories\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"标题：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入文章标题\",\"clearable\":\"\"},model:{value:(_vm.model.title),callback:function ($$v) {_vm.$set(_vm.model, \"title\", $$v)},expression:\"model.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容：\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.model.content),callback:function ($$v) {_vm.$set(_vm.model, \"content\", $$v)},expression:\"model.content\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"el-icon-upload\",attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <el-breadcrumb separator=\"/\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>文章管理</el-breadcrumb-item>\n      <el-breadcrumb-item>{{id ? '编辑' :'新建'}}文章</el-breadcrumb-item>\n    </el-breadcrumb>\n    <h1>{{ id ? \"编辑\" : \"新建\" }}文章</h1>\n    <el-card>\n<el-form label-width=\"120px\" @submit.native.prevent=\"save\">\n      <el-form-item label=\"所属分类：\">\n        <el-select v-model=\"model.categories\" multiple>\n          <el-option\n            v-for=\"item in categories\"\n            :key=\"item._id\"\n            :label=\"item.name\"\n            :value=\"item._id\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"标题：\">\n        <el-input\n          v-model=\"model.title\"\n          placeholder=\"请输入文章标题\"\n          clearable\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"内容：\">\n        <vue-editor\n          useCustomImageHandler\n          @image-added=\"handleImageAdded\"\n          v-model=\"model.content\"\n        ></vue-editor>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\" class=\"el-icon-upload\">保存</el-button>\n      </el-form-item>\n    </el-form>\n    </el-card>\n    \n  </div>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  components: {\n    VueEditor\n  },\n  props: {\n    id: {}\n  },\n  data() {\n    return {\n      categories: [],\n      model: {},\n      parents: []\n    };\n  },\n  methods: {\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader) {\n      // An example of using FormData\n      // NOTE: Your key could be different such as:\n      // formData.append('file', file)\n\n      let formData = new FormData();\n      formData.append(\"file\", file);\n      let res = await this.$http.post(\"upload\", formData);\n      Editor.insertEmbed(cursorLocation, \"image\", res.data.url);\n      resetUploader();\n    },\n    async save() {\n      let res;\n      if (this.id) {\n        res = await this.$http.put(`rest/articles/${this.id}`, this.model);\n      } else {\n        res = await this.$http.post(\"rest/articles\", this.model);\n      }\n\n      this.$router.push(\"/article/list\");\n      this.$message({\n        type: \"success\",\n        message: \"保存成功\"\n      });\n    },\n    async fetchCategories() {\n      const res = await this.$http.get(\"rest/categories\");\n      this.categories = res.data;\n      \n    },\n    async fetch() {\n      const res = await this.$http.get(`rest/articles/${this.id}`);\n      this.model = res.data;\n      console.log(res.data);\n    }\n  },\n  created() {\n    this.id && this.fetch();\n    this.fetchCategories();\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleEdit.vue?vue&type=template&id=3391a75c&\"\nimport script from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}